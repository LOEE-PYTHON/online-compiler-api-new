<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Compiler</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
</head>
<body>
    <form method="post" action="/">
      <div>
        <select id="lang" name="language_id">
          <option value=54>cpp</option>
          <option value=71>python</option>
          <option value=49>c</option>
          <option value=63>node</option>
          <option value=62>java</option>
      </select>
    </div>
    <div>
        <textarea id="code" style="
        height: 200px;
        width: 500px;
    " name="source_code" placeholder="这里输入你的代码"></textarea>
    <div>
    <textarea id="input" placeholder="输入" name="stdin"></textarea>
    <textarea id="eo" name="expected_output" placeholder="排除"></textarea>
    <input id="t" type="number" name="timeout" value=1000 min=1000 max =10000 placeholder="时间限制">
</div>    
</div>
    <div>
        <button id="btn" type="button">提交代码</button>
    </div>
    </form>
    <textarea id="output" style="
    height: 100px;
    width: 500px;
"  disabled></textarea>

<br><br>

</body>
<script type="text/javascript">
$('#btn').click(function()
{
    $("#output").text("Loading....");

    $.ajax({
    type: 'POST',url: '',dataType: 'json',cache: false,async: true,
    data: {
        language_id:parseInt($("#lang").val()),
        source_code: $("#code").val(),
        stdin: $("#input").val(),
        expected_output:$("#eo").val(),
        cpu_time_limit: parseInt($("#t").val())   
            },
            success: function(json){
               console.log(JSON.stringify(json));
               if(json.stderr==null)
               $("#output").text(json.stdout);
               else
               $("#output").text(json.stderr);

               

              
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                console.log(errorThrown);
            }

});

})

</script>
</html>
